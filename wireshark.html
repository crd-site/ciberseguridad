<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Gu√≠a de Uso Wireshark</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="assets/css/estilos.css">
</head>
<body>
  <main>
    <!-- Aviso √©tico -->
    <div class="aviso-etico">
      üõ°Ô∏è <strong>Uso educativo y √©tico:</strong> Este material fue elaborado exclusivamente con fines acad√©micos para el √°rea de <strong>ciberseguridad</strong>. Todo el contenido se utiliza en un entorno controlado, con prop√≥sitos <strong>formativos</strong> guiados por el docente. Como parte del aprendizaje, se introduce el <strong>modelado de amenazas</strong> para desarrollar una <strong>mentalidad cr√≠tica</strong> hacia la seguridad, ense√±ando a los estudiantes a analizar sistemas desde la perspectiva de un <strong>posible atacante</strong> con el fin de anticipar y prevenir riesgos. Lejos de constituir una gu√≠a para <strong>pr√°cticas ilegales</strong>, este enfoque busca formar <strong>profesionales conscientes</strong>, capaces de pensar como un atacante para <strong>proteger mejor los sistemas</strong>.
    </div>

    <!-- Encabezado principal -->
    <h1>üß† Gu√≠a de Uso Wireshark</h1>

    <!-- Intro / ¬øQu√© es? -->
    <h2>üßæ ¬øQu√© es Wireshark?</h2>
    <p>
      <strong>Wireshark</strong> es un analizador de protocolos de red que permite capturar, inspeccionar y analizar el tr√°fico que circula por las interfaces de red. Es clave en <strong>ciberseguridad</strong>, <strong>an√°lisis forense</strong> y <strong>administraci√≥n de redes</strong> para detectar problemas, identificar ataques y entender el comportamiento de aplicaciones y protocolos.
    </p>
    <div class="aviso-etico" style="margin-top: 16px;">
      üí° <strong>Nota:</strong> En <strong>Kali Linux</strong> suele venir preinstalado. Verific√° permisos de captura:
      <pre><code>sudo wireshark (o directamente de la interfaz gradica GUI)
    (solo si no tiene permisos el usuario) >>   sudo usermod -aG wireshark $USER</code></pre>
      Luego, cerr√° sesi√≥n y volv√© a entrar para aplicar los cambios.
    </div>

    <hr>

    <!-- 1. Instalaci√≥n y preparaci√≥n -->
    <h2>üõ†Ô∏è 1. Instalaci√≥n y Preparaci√≥n</h2>

    <h3>1.1 Descarga (si no us√°s Kali)</h3>
    <ul>
      <li>üåç Sitio oficial: <a href="https://www.wireshark.org/" target="_blank">https://www.wireshark.org/</a></li>
      <li>Disponible para Windows, Linux y macOS.</li>
    </ul>

    <h3>1.2 Instalaci√≥n en Windows</h3>
    <ol>
      <li>Descargar el instalador <code>.exe</code>.</li>
      <li>Ejecutar y aceptar la licencia.</li>
      <li>Incluir <strong>Npcap</strong> cuando se solicite (necesario para capturar).</li>
      <li>Finalizar e iniciar desde el men√∫ Inicio.</li>
    </ol>

    <h3>1.3 Instalaci√≥n en Linux (Ubuntu/Debian)</h3>
    <pre><code>sudo apt update
sudo apt install wireshark
sudo usermod -aG wireshark $USER</code></pre>
    <p>üîÅ Cerr√° sesi√≥n y volv√© a entrar para aplicar permisos.</p>

    <h3>1.4 Instalaci√≥n en macOS (Homebrew)</h3>
    <pre><code>brew install --cask wireshark</code></pre>
    <p>üîê Autoriz√° permisos de captura si macOS lo solicita.</p>

    <h3>1.5 Uso en entornos virtualizados (VMware / VirtualBox / GNS3)</h3>
    <ul>
      <li>En <strong>VMware</strong>, el modo de red afecta lo que ves:
        <ul>
          <li><strong>NAT</strong>: ver√°s tr√°fico de la VM hacia Internet a trav√©s del host.</li>
          <li><strong>Bridge</strong>: la VM est√° en la red f√≠sica; pod√©s ver m√°s tr√°fico de la LAN.</li>
          <li><strong>Host-Only</strong>: solo tr√°fico entre VM y host.</li>
        </ul>
      </li>
      <li>En <strong>GNS3</strong>, pod√©s conectar Wireshark a enlaces virtuales para inspeccionar cada segmento.</li>
      <li>Record√° elegir la <strong>interfaz correcta</strong> (o adaptador virtual) antes de capturar.</li>
    </ul>

    <hr>

    <!-- 2. Nivel inicial -->
    <h2>üå± 2. Nivel Inicial ‚Äî Primeros Pasos</h2>

    <h3>2.1 Interfaz principal</h3>
    <ul>
      <li>Listado de interfaces disponibles</li>
      <li>Barra de filtros</li>
      <li>Panel de paquetes (arriba)</li>
      <li>Panel de detalles (medio)</li>
      <li>Panel de bytes (abajo)</li>
    </ul>

    <h3>2.2 Selecci√≥n de interfaz y captura b√°sica</h3>
    <ol>
      <li>Identific√° la interfaz con tr√°fico (Wi-Fi, Ethernet, etc.).</li>
      <li>Doble clic para iniciar la captura.</li>
      <li>Detenela con el bot√≥n rojo.</li>
    </ol>

    <h3>2.3 Filtros de visualizaci√≥n b√°sicos</h3>
    <pre><code>http
dns
tcp
ip.addr == 192.168.1.10</code></pre>

    <h3>2.4 Ejercicio b√°sico</h3>
    <ul>
      <li>Captur√° tr√°fico mientras visit√°s un sitio <strong>HTTP</strong>.</li>
      <li>Filtr√° con <code>http</code> y observ√° solicitudes <strong>GET</strong>/<strong>POST</strong>.</li>
      <li>Respond√©: ¬øCu√°l es la IP del servidor web?</li>
    </ul>

    <h3>2.5 Filtros de captura vs. visualizaci√≥n</h3>
    <p>Los <strong>filtros de captura</strong> se aplican <em>antes</em> de iniciar la captura (limitan qu√© paquetes se guardan). Los <strong>filtros de visualizaci√≥n</strong> se aplican <em>despu√©s</em> (solo ocultan/mostrar en pantalla).</p>
    <div class="aviso-etico" style="margin-top: 10px;">
      <p><strong>Ejemplos de filtros de captura</strong> (sintaxis BPF, definidos antes de iniciar):</p>
      <pre><code>port 80
host 192.168.1.10
net 10.0.0.0/8
tcp and not port 22</code></pre>
      <p><strong>Ejemplos de filtros de visualizaci√≥n</strong> (barra de filtros):</p>
      <pre><code>http && ip.dst == 192.168.1.50
tcp.flags.syn == 1 && tcp.flags.ack == 0
dns.qry.name contains "example.com"</code></pre>
    </div>

    <hr>

    <!-- 3. Nivel intermedio -->
    <h2>üß© 3. Nivel Intermedio ‚Äî An√°lisis Detallado</h2>

    <h3>3.1 An√°lisis de protocolos</h3>
    <ul>
      <li><strong>TCP</strong>: seguimiento de conversaciones (<em>Follow TCP Stream</em>).</li>
      <li><strong>UDP</strong>: tr√°fico sin confirmaciones.</li>
      <li><strong>ICMP</strong>: diagn√≥stico de conectividad.</li>
    </ul>

    <h3>3.2 Reconstrucci√≥n de flujos</h3>
    <p>Clic derecho sobre un paquete ‚Üí <strong>Follow</strong> ‚Üí eleg√≠ el protocolo (TCP/UDP/HTTP‚Ä¶).</p>

    <h3>3.3 Perfiles personalizados</h3>
    <ul>
      <li>Coloreado por tipo de tr√°fico.</li>
      <li>Guardado de filtros frecuentes.</li>
    </ul>

    <h3>3.4 Ejercicio intermedio</h3>
    <ul>
      <li>Captur√° tr√°fico de una b√∫squeda <strong>DNS</strong>.</li>
      <li>Filtr√° con <code>dns</code> y determin√° el dominio consultado y la IP de respuesta.</li>
    </ul>

    <h3>3.5 Estad√≠sticas √∫tiles</h3>
    <ul>
      <li><strong>Statistics ‚Üí Protocol Hierarchy</strong>: vista porcentual por protocolos.</li>
      <li><strong>Statistics ‚Üí Conversations</strong>: pares de comunicaci√≥n (IP/puertos), bytes y paquetes.</li>
      <li><strong>Statistics ‚Üí Endpoints</strong>: hosts involucrados (IPs, MACs), √∫til para identificar top talkers.</li>
    </ul>

    <hr>

    <!-- 4. Nivel avanzado -->
    <h2>üöÄ 4. Nivel Avanzado ‚Äî Uso Profesional</h2>

    <h3>4.1 Filtros complejos</h3>
    <p>HTTP hacia una IP espec√≠fica:</p>
    <pre><code>http && ip.dst == 192.168.1.50</code></pre>

    <h3>4.2 An√°lisis de tr√°fico cifrado</h3>
    <ul>
      <li>Identificar handshake <strong>TLS</strong> y certificados.</li>
      <li>Uso de claves para descifrado (solo en entornos controlados).</li>
    </ul>

    <h3>4.3 Detecci√≥n de patrones de ataque</h3>
    <p>Escaneo SYN (posible port scan):</p>
    <pre><code>tcp.flags.syn == 1 && tcp.flags.ack == 0</code></pre>
    <p>Intentos DoS: observar alto volumen hacia un mismo destino en poco tiempo.</p>

    <h3>4.4 Integraci√≥n con TShark (CLI)</h3>
    <p>TShark es la versi√≥n de l√≠nea de comandos de Wireshark (sin interfaz gr√°fica) y permite capturar, filtrar y analizar tr√°fico.</p>
    <pre><code>tshark -i eth0 -f "tcp port 80" -w captura_http.pcap</code></pre>

    <h3>4.5 Ejercicio avanzado</h3>
    <ul>
      <li>Analiz√° un <code>.pcap</code> sospechoso.</li>
      <li>Identific√° el tipo de ataque, protocolo implicado, IP origen/destino.</li>
    </ul>

    <h3>4.6 Reconstrucci√≥n de archivos y objetos</h3>
    <p>Wireshark permite reconstruir conversaciones y, en muchos casos, extraer archivos completos capturados en la red. Esto es √∫til para auditor√≠as, an√°lisis forense y diagn√≥stico de problemas.</p>

    <h4>a) Preparar la captura</h4>
    <p>Gener√° tr√°fico real descargando un archivo (laboratorio controlado):</p>
    <ul>
      <li><code>.zip</code></li>
      <li><code>.jpg</code></li>
      <li><code>.pdf</code></li>
      <li>Otro archivo permitido</li>
    </ul>
    <p>üí° As√≠ asegur√°s tr√°fico claro para extraer.</p>

    <h4>b) Seguir conversaciones (Follow Stream)</h4>
    <ol>
      <li>Abr√≠ o captur√° un <code>.pcap</code>.</li>
      <li>Localiz√° un paquete del protocolo de inter√©s (p.ej. <strong>HTTP</strong>).</li>
      <li>Clic derecho ‚Üí <strong>Follow</strong> ‚Üí <em>TCP Stream</em> o <em>UDP Stream</em>.</li>
      <li>Ver√°s la conversaci√≥n reconstruida (cliente/servidor por color).</li>
      <li>Cambi√° la codificaci√≥n (ASCII, Hex, etc.) seg√∫n necesidad.</li>
    </ol>

    <h4>c) Exportar objetos</h4>
    <ol>
      <li>Men√∫ <strong>File</strong> ‚Üí <strong>Export Objects</strong> ‚Üí (HTTP, SMB, etc.).</li>
      <li>Seleccion√° el archivo de la lista y guardalo.</li>
    </ol>
    <p>üí° Si un JPG viaj√≥ por HTTP, se podr√° guardar desde esta opci√≥n.</p>

    <h4>d) Consideraciones</h4>
    <ul>
      <li>Funciona si el tr√°fico est√° sin cifrar o si ten√©s claves para descifrar.</li>
      <li>Usar solo con autorizaci√≥n expresa.</li>
      <li>√ötil para evidenciar riesgos al transmitir datos sin cifrar.</li>
    </ul>

    <h3>4.7 Flujo de trabajo con tcpdump</h3>
    <p>Para capturar desde CLI (servidores/SSH) y analizar luego en Wireshark:</p>
    <pre><code># Listar interfaces
sudo tcpdump -D

# Capturar 200 paquetes HTTP en eth0 y guardar a pcap
sudo tcpdump -i eth0 -c 200 -w captura_http.pcap 'tcp port 80'

# Filtro por host o red
sudo tcpdump -i eth0 -w salida.pcap 'host 192.168.1.10'
sudo tcpdump -i eth0 -w salida.pcap 'net 10.0.0.0/8'</code></pre>
    <p>Abr√≠ luego el archivo <code>.pcap</code> en Wireshark para an√°lisis detallado.</p>

    <hr>

    <!-- Buenas pr√°cticas -->
    <h2>üõ°Ô∏è 5. Buenas Pr√°cticas y √âtica</h2>
    <ul>
      <li>Captur√° √∫nicamente en redes donde tengas autorizaci√≥n.</li>
      <li>Almacen√° archivos <code>.pcap</code> de forma segura.</li>
      <li>Document√° hallazgos con contexto t√©cnico y legal.</li>
      <li>Nombr√° capturas de forma clara (ej.: <code>2025-08-10_lab_http.pcap</code>).</li>
      <li>Agreg√° una breve descripci√≥n del escenario junto al archivo.</li>
    </ul>

    <hr>

    <!-- Troubleshooting -->
    <h2>üßØ 6. Resoluci√≥n de problemas comunes</h2>
    <ul>
      <li><strong>No veo interfaces</strong> ‚Üí Verificar instalaci√≥n/servicio de Npcap (Windows) o permisos (Linux).</li>
      <li><strong>No veo tr√°fico</strong> ‚Üí Elegiste la interfaz equivocada; prob√° otra o cambi√° el modo de red de la VM.</li>
      <li><strong>Tr√°fico cifrado ilegible</strong> ‚Üí Limitaci√≥n esperable sin claves; usar descifrado solo en entornos controlados.</li>
      <li><strong>Error de permisos en Linux</strong> ‚Üí Asegurate de estar en el grupo <code>wireshark</code> y reiniciar sesi√≥n.</li>
    </ul>

    <hr>

    <!-- Recursos -->
    <h2>üìö 7. Recursos Adicionales</h2>
    <ul>
      <li>Wireshark Foundation ‚Äî <a href="https://www.wireshark.org/docs/" target="_blank">Wireshark User‚Äôs Guide</a></li>
      <li>Kurose & Ross ‚Äî <em>Computer Networking: A Top-Down Approach</em>.</li>
      <li>Sanders ‚Äî <em>Practical Packet Analysis</em>, No Starch Press.</li>
    </ul>

    <hr>

    <!-- Ejercicio final -->
    <h2>üéì 8. Ejercicio final integrador</h2>
    <ol>
      <li>Eleg√≠ una interfaz y captur√° durante 2‚Äì3 minutos.</li>
      <li>Aplic√° un filtro de captura y luego de visualizaci√≥n.</li>
      <li>Segu√≠ un flujo (Follow TCP/UDP Stream).</li>
      <li>Export√° un objeto (si corresponde, p.ej. HTTP).</li>
      <li>Gener√° un mini informe (1 p√°gina): objetivos, filtros usados, hallazgos y capturas de pantalla.</li>
    </ol>

  </main>

  <div data-include="footer"></div>
  <script src="assets/js/scripts.js"></script>
</body>
</html>
